name: "Create PR"

on:
    workflow_dispatch:
      inputs:
        name:
          description: 'Create PR'
          default: ""
          required: true
        credentials:
          type: boolean
          description: Create PR during release
          default: true


jobs:
  validate-release:
    name: Validate release
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v3
        with:
          fetch-depth: 0

      - name: Update chart and module resources
        env:
          GH_TOKEN: ${{ secrets.GH_TEST }}
        run: |
          scripts/create_scan_config.sh ${{ inputs.name }}
          echo "BRANCH_NAME=sec_config_${{ inputs.name }}" >> $GITHUB_ENV
          scripts/create_pr.sh ${{ inputs.name }}

          